# ×“×•×’×××•×ª ×§×•×“ - ××¡××›×™× ××©×¤×˜×™×™× × ×•×¡×¤×™×

## ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×
1. [×”×¡×›× ×©×›×¨ ×˜×¨×—×”](#×”×¡×›×-×©×›×¨-×˜×¨×—×”)
2. [×™×™×¤×•×™ ×›×•×—](#×™×™×¤×•×™-×›×•×—)
3. [×‘×§×©×” ×œ××™× ×•×™ ××¤×•×˜×¨×•×¤×•×¡](#×‘×§×©×ª-××¤×•×˜×¨×•×¤×¡×•×ª)
4. [API Routes](#api-routes)
5. [PDF Templates](#pdf-templates)

---

## 1. ×”×¡×›× ×©×›×¨ ×˜×¨×—×” {#×”×¡×›×-×©×›×¨-×˜×¨×—×”}

### Types

```typescript
// src/types/attorney-fee.ts

export interface AttorneyFeeAgreement {
  // ×¤×¨×˜×™ ×¢×•×¨×š ×”×“×™×Ÿ
  attorney: {
    name: string
    licenseNumber: string
    address: string
    phone: string
    email: string
  }
  
  // ×¤×¨×˜×™ ×”×œ×§×•×—
  client: {
    name: string
    id: string
    address: string
    phone: string
  }
  
  // ×ª×™××•×¨ ×”×”×œ×™×š
  proceeding: {
    type: 'tzo_yerusha' | 'tzo_kiyum' | 'opposition' | 'other'
    description?: string
    includedServices: string[]
  }
  
  // ×©×›×¨ ×˜×¨×—×”
  fee: {
    type: 'fixed' | 'percentage' | 'hourly' | 'combined'
    fixedAmount?: number
    percentage?: number
    hourlyRate?: number
    estateValue?: number
    calculatedFee?: FeeCalculation
  }
  
  // ×ª×©×œ×•×
  payment: {
    method: 'one_time' | 'installments' | 'end_of_process' | 'other'
    installments?: number
    advance?: number
    advanceDueDate?: string
    paymentType: 'bank_transfer' | 'check' | 'credit_card' | 'cash'
  }
  
  // ×ª××¨×™×›×™×
  date: string
  signedAt: string
}

export interface FeeCalculation {
  first100k: number      // 6% ×¢×œ 100,000 ×”×¨××©×•× ×™×
  next400k: number       // 5% ×¢×œ 400,000 ×”×‘××™×
  next500k: number       // 3% on 500,000 ×”×‘××™×
  remainder: number      // 2% ×¢×œ ×”×™×ª×¨×”
  subtotal: number       // ×¡×”"×› ×œ×¤× ×™ ××¢"×
  vat: number           // ××¢"× 17%
  total: number         // ×¡×”"×› ×›×•×œ×œ ××¢"×
}
```

### ×—×™×©×•×‘ ×©×›×¨ ×˜×¨×—×”

```typescript
// src/lib/attorney-fee-calculator.ts

/**
 * ×—×™×©×•×‘ ×©×›×¨ ×˜×¨×—×” ××§×¡×™××œ×™ ×œ×¤×™ ×ª×§× ×•×ª ×œ×©×›×ª ×¢×•×¨×›×™ ×”×“×™×Ÿ
 */
export function calculateMaxAttorneyFee(estateValue: number): FeeCalculation {
  let remaining = estateValue
  
  // 6% ×¢×œ 100,000 ×”×¨××©×•× ×™×
  const first100k = Math.min(remaining, 100000) * 0.06
  remaining -= Math.min(remaining, 100000)
  
  // 5% ×¢×œ 400,000 ×”×‘××™×
  const next400k = Math.min(remaining, 400000) * 0.05
  remaining -= Math.min(remaining, 400000)
  
  // 3% ×¢×œ 500,000 ×”×‘××™×
  const next500k = Math.min(remaining, 500000) * 0.03
  remaining -= Math.min(remaining, 500000)
  
  // 2% ×¢×œ ×”×™×ª×¨×”
  const remainder = remaining * 0.02
  
  // ×¡×”"×›
  const subtotal = first100k + next400k + next500k + remainder
  const vat = subtotal * 0.17
  const total = subtotal + vat
  
  return {
    first100k,
    next400k,
    next500k,
    remainder,
    subtotal,
    vat,
    total
  }
}

/**
 * ×¤×•×¨××˜ ×¡×›×•× ×›×¡×£
 */
export function formatCurrency(amount: number): string {
  return new Intl.NumberFormat('he-IL', {
    style: 'currency',
    currency: 'ILS',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0,
  }).format(amount)
}
```

### ×§×•××¤×•× × ×˜×ª ×˜×•×¤×¡

```typescript
// src/app/documents/attorney-fee/components/AttorneyFeeForm.tsx

'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { calculateMaxAttorneyFee, formatCurrency } from '@/lib/attorney-fee-calculator'

const schema = z.object({
  attorney: z.object({
    name: z.string().min(1, '×™×© ×œ××œ× ×©×'),
    licenseNumber: z.string().min(1, '×™×© ×œ××œ× ××¡×¤×¨ ×¨×™×©×™×•×Ÿ'),
    address: z.string().min(1, '×™×© ×œ××œ× ×›×ª×•×‘×ª'),
    phone: z.string().min(1, '×™×© ×œ××œ× ×˜×œ×¤×•×Ÿ'),
    email: z.string().email('××™××™×™×œ ×œ× ×ª×§×™×Ÿ'),
  }),
  client: z.object({
    name: z.string().min(1, '×™×© ×œ××œ× ×©×'),
    id: z.string().length(9, '×ª×¢×•×“×ª ×–×”×•×ª ×—×™×™×‘×ª ×œ×”×™×•×ª 9 ×¡×¤×¨×•×ª'),
    address: z.string().min(1, '×™×© ×œ××œ× ×›×ª×•×‘×ª'),
    phone: z.string().min(1, '×™×© ×œ××œ× ×˜×œ×¤×•×Ÿ'),
  }),
  proceeding: z.object({
    type: z.enum(['tzo_yerusha', 'tzo_kiyum', 'opposition', 'other']),
    description: z.string().optional(),
  }),
  fee: z.object({
    type: z.enum(['fixed', 'percentage', 'hourly', 'combined']),
    fixedAmount: z.number().optional(),
    percentage: z.number().min(0).max(100).optional(),
    hourlyRate: z.number().optional(),
    estateValue: z.number().optional(),
  }),
  payment: z.object({
    method: z.enum(['one_time', 'installments', 'end_of_process', 'other']),
    installments: z.number().optional(),
    advance: z.number().optional(),
  }),
})

type FormData = z.infer<typeof schema>

export function AttorneyFeeForm() {
  const [calculation, setCalculation] = useState<ReturnType<typeof calculateMaxAttorneyFee> | null>(null)
  
  const { register, handleSubmit, watch, formState: { errors } } = useForm<FormData>({
    resolver: zodResolver(schema),
  })
  
  const feeType = watch('fee.type')
  const estateValue = watch('fee.estateValue')
  
  // ×—×™×©×•×‘ ××•×˜×•××˜×™ ×›××©×¨ ××©×ª× ×” ×¢×¨×š ×”×¢×™×–×‘×•×Ÿ
  useEffect(() => {
    if (feeType === 'percentage' && estateValue && estateValue > 0) {
      setCalculation(calculateMaxAttorneyFee(estateValue))
    }
  }, [feeType, estateValue])
  
  const onSubmit = async (data: FormData) => {
    try {
      const response = await fetch('/api/documents/attorney-fee', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      })
      
      if (!response.ok) throw new Error('×©×’×™××” ×‘×©××™×¨×”')
      
      const result = await response.json()
      toast.success('×”×”×¡×›× × ×©××¨ ×‘×”×¦×œ×—×”')
      router.push(`/documents/${result.id}`)
    } catch (error) {
      toast.error('×©×’×™××” ×‘×©××™×¨×”')
    }
  }
  
  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-8">
      {/* ×¤×¨×˜×™ ×¢×•×¨×š ×”×“×™×Ÿ */}
      <Card>
        <CardHeader>
          <CardTitle>×¤×¨×˜×™ ×¢×•×¨×š ×”×“×™×Ÿ</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Input
            label="×©× ××œ×"
            {...register('attorney.name')}
            error={errors.attorney?.name?.message}
          />
          <Input
            label="××¡×¤×¨ ×¨×™×©×™×•×Ÿ"
            {...register('attorney.licenseNumber')}
            error={errors.attorney?.licenseNumber?.message}
          />
          <Input
            label="×›×ª×•×‘×ª ××©×¨×“"
            {...register('attorney.address')}
            error={errors.attorney?.address?.message}
          />
          <Input
            label="×˜×œ×¤×•×Ÿ"
            {...register('attorney.phone')}
            error={errors.attorney?.phone?.message}
          />
          <Input
            label="××™××™×™×œ"
            type="email"
            {...register('attorney.email')}
            error={errors.attorney?.email?.message}
          />
        </CardContent>
      </Card>
      
      {/* ×¤×¨×˜×™ ×”×œ×§×•×— */}
      <Card>
        <CardHeader>
          <CardTitle>×¤×¨×˜×™ ×”×œ×§×•×—</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Input
            label="×©× ××œ×"
            {...register('client.name')}
            error={errors.client?.name?.message}
          />
          <Input
            label="×ª×¢×•×“×ª ×–×”×•×ª"
            {...register('client.id')}
            error={errors.client?.id?.message}
            maxLength={9}
          />
          <Input
            label="×›×ª×•×‘×ª"
            {...register('client.address')}
            error={errors.client?.address?.message}
          />
          <Input
            label="×˜×œ×¤×•×Ÿ"
            {...register('client.phone')}
            error={errors.client?.phone?.message}
          />
        </CardContent>
      </Card>
      
      {/* ×ª×™××•×¨ ×”×”×œ×™×š */}
      <Card>
        <CardHeader>
          <CardTitle>×ª×™××•×¨ ×”×”×œ×™×š</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Select
            label="×¡×•×’ ×”×œ×™×š"
            {...register('proceeding.type')}
            error={errors.proceeding?.type?.message}
          >
            <option value="">×‘×—×¨ ×¡×•×’ ×”×œ×™×š</option>
            <option value="tzo_yerusha">×¦×• ×™×¨×•×©×”</option>
            <option value="tzo_kiyum">×¦×• ×§×™×•× ×¦×•×•××”</option>
            <option value="opposition">×”×ª× ×’×“×•×ª</option>
            <option value="other">××—×¨</option>
          </Select>
          
          {watch('proceeding.type') === 'other' && (
            <Textarea
              label="×ª×™××•×¨ ×”×”×œ×™×š"
              {...register('proceeding.description')}
              rows={3}
            />
          )}
        </CardContent>
      </Card>
      
      {/* ×©×›×¨ ×˜×¨×—×” */}
      <Card>
        <CardHeader>
          <CardTitle>×©×›×¨ ×˜×¨×—×”</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Select
            label="×©×™×˜×ª ×—×™×©×•×‘"
            {...register('fee.type')}
            error={errors.fee?.type?.message}
          >
            <option value="">×‘×—×¨ ×©×™×˜×”</option>
            <option value="fixed">×¡×›×•× ×§×‘×•×¢</option>
            <option value="percentage">××—×•×– ××”×¢×™×–×‘×•×Ÿ</option>
            <option value="hourly">×ª×¢×¨×™×£ ×©×¢×ª×™</option>
            <option value="combined">×©×™×œ×•×‘</option>
          </Select>
          
          {feeType === 'fixed' && (
            <Input
              label="×¡×›×•× (â‚ª)"
              type="number"
              {...register('fee.fixedAmount', { valueAsNumber: true })}
              error={errors.fee?.fixedAmount?.message}
            />
          )}
          
          {feeType === 'percentage' && (
            <>
              <Input
                label="×¢×¨×š ×”×¢×™×–×‘×•×Ÿ (â‚ª)"
                type="number"
                {...register('fee.estateValue', { valueAsNumber: true })}
                error={errors.fee?.estateValue?.message}
              />
              
              <Input
                label="××—×•×– ×©×›×¨ ×˜×¨×—×” (%)"
                type="number"
                step="0.1"
                {...register('fee.percentage', { valueAsNumber: true })}
                error={errors.fee?.percentage?.message}
              />
              
              {/* ×ª×¦×•×’×ª ×—×™×©×•×‘ */}
              {calculation && (
                <div className="mt-4 p-4 bg-blue-50 rounded-lg">
                  <h4 className="font-semibold mb-2">×—×™×©×•×‘ ×©×›×¨ ×˜×¨×—×” ××§×¡×™××œ×™ ×œ×¤×™ ×ª×§× ×•×ª:</h4>
                  <table className="w-full text-sm">
                    <tbody>
                      <tr>
                        <td>×¢×œ 100,000 â‚ª ×”×¨××©×•× ×™× (6%)</td>
                        <td className="text-left font-semibold">
                          {formatCurrency(calculation.first100k)}
                        </td>
                      </tr>
                      <tr>
                        <td>×¢×œ 400,000 â‚ª ×”×‘××™× (5%)</td>
                        <td className="text-left font-semibold">
                          {formatCurrency(calculation.next400k)}
                        </td>
                      </tr>
                      <tr>
                        <td>×¢×œ 500,000 â‚ª ×”×‘××™× (3%)</td>
                        <td className="text-left font-semibold">
                          {formatCurrency(calculation.next500k)}
                        </td>
                      </tr>
                      <tr>
                        <td>×¢×œ ×”×™×ª×¨×” (2%)</td>
                        <td className="text-left font-semibold">
                          {formatCurrency(calculation.remainder)}
                        </td>
                      </tr>
                      <tr className="border-t">
                        <td className="pt-2">×¡×”"×› ×œ×¤× ×™ ××¢"×</td>
                        <td className="text-left font-semibold pt-2">
                          {formatCurrency(calculation.subtotal)}
                        </td>
                      </tr>
                      <tr>
                        <td>××¢"× (17%)</td>
                        <td className="text-left font-semibold">
                          {formatCurrency(calculation.vat)}
                        </td>
                      </tr>
                      <tr className="border-t font-bold">
                        <td className="pt-2">×¡×”"×› ×›×•×œ×œ ××¢"×</td>
                        <td className="text-left pt-2">
                          {formatCurrency(calculation.total)}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <p className="mt-2 text-xs text-gray-600">
                    * ×–×”×• ×©×›×¨ ×”×˜×¨×—×” ×”××§×¡×™××œ×™ ×”××•×ª×¨ ×œ×¤×™ ×ª×§× ×•×ª ×œ×©×›×ª ×¢×•×¨×›×™ ×”×“×™×Ÿ
                  </p>
                </div>
              )}
            </>
          )}
          
          {feeType === 'hourly' && (
            <Input
              label="×ª×¢×¨×™×£ ×œ×©×¢×” (â‚ª)"
              type="number"
              {...register('fee.hourlyRate', { valueAsNumber: true })}
              error={errors.fee?.hourlyRate?.message}
            />
          )}
        </CardContent>
      </Card>
      
      {/* ×ª×©×œ×•× */}
      <Card>
        <CardHeader>
          <CardTitle>××•×¤×Ÿ ×”×ª×©×œ×•×</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Select
            label="×©×™×˜×ª ×ª×©×œ×•×"
            {...register('payment.method')}
          >
            <option value="one_time">×ª×©×œ×•× ×—×“ ×¤×¢××™</option>
            <option value="installments">×ª×©×œ×•××™×</option>
            <option value="end_of_process">×‘×¡×™×•× ×”×”×œ×™×š</option>
            <option value="other">××—×¨</option>
          </Select>
          
          {watch('payment.method') === 'installments' && (
            <Input
              label="××¡×¤×¨ ×ª×©×œ×•××™×"
              type="number"
              {...register('payment.installments', { valueAsNumber: true })}
            />
          )}
          
          <Input
            label="××§×“××” (â‚ª)"
            type="number"
            {...register('payment.advance', { valueAsNumber: true })}
          />
        </CardContent>
      </Card>
      
      {/* ×›×¤×ª×•×¨×™ ×¤×¢×•×œ×” */}
      <div className="flex gap-4">
        <Button type="submit" size="lg">
          ×©××•×¨ ×”×¡×›×
        </Button>
        <Button type="button" variant="outline" size="lg">
          ×ª×¦×•×’×” ××§×“×™××”
        </Button>
      </div>
    </form>
  )
}
```

---

## 2. ×™×™×¤×•×™ ×›×•×— {#×™×™×¤×•×™-×›×•×—}

### Types

```typescript
// src/types/power-of-attorney.ts

export type PowerOfAttorneyType = 'general' | 'specific'

export interface PowerOfAttorney {
  // ×”××™×™×¤×”
  principal: {
    name: string
    id: string
    address: string
    phone?: string
  }
  
  // ×”××™×•×¤×”
  agent: {
    name: string
    id: string
    address: string
    phone?: string
    isAttorney?: boolean
    licenseNumber?: string
  }
  
  // ×¡×•×’
  type: PowerOfAttorneyType
  
  // ××˜×¨×” (×œ×™×™×¤×•×™ ×›×•×— ××™×•×—×“)
  purpose?: {
    type: 'inheritance' | 'real_estate' | 'banking' | 'other'
    description: string
    deceasedName?: string
    deceasedId?: string
  }
  
  // ×¡××›×•×™×•×ª
  powers: {
    realEstate: boolean
    banking: boolean
    maxBankingAmount?: number
    tax: boolean
    legal: boolean
    inheritance: boolean
    canDelegate: boolean // ×™×™×¤×•×™ ×›×•×— ××©× ×”
    canRevokeOthers: boolean // ×‘×™×˜×•×œ ×™×™×¤×•×™×™ ×›×•×— ×§×•×“××™×
    other: string[]
  }
  
  // ×”×’×‘×œ×•×ª
  restrictions: string[]
  
  // ×ª×•×§×£
  validity: {
    type: 'unlimited' | 'until_date' | 'until_completion'
    endDate?: string
    irrevocable: boolean
  }
  
  // ××™×©×•×¨ ×—×ª×™××”
  notarization: {
    notaryName: string
    notaryType: 'attorney' | 'notary' | 'municipality'
    licenseNumber: string
    date: string
  }
  
  // ×ª××¨×™×›×™×
  date: string
  signedAt: string
}
```

### ×§×•××¤×•× × ×˜×ª ×˜×•×¤×¡

```typescript
// src/app/documents/power-of-attorney/components/PowerOfAttorneyForm.tsx

'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'

export function PowerOfAttorneyForm() {
  const [poaType, setPoaType] = useState<PowerOfAttorneyType>('general')
  
  const { register, handleSubmit, watch, formState: { errors } } = useForm()
  
  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-8">
      {/* ×‘×—×™×¨×ª ×¡×•×’ */}
      <Card>
        <CardHeader>
          <CardTitle>×¡×•×’ ×™×™×¤×•×™ ×”×›×•×—</CardTitle>
        </CardHeader>
        <CardContent>
          <RadioGroup value={poaType} onValueChange={setPoaType}>
            <div className="flex items-center space-x-2 space-x-reverse">
              <RadioGroupItem value="general" id="general" />
              <Label htmlFor="general">
                ×™×™×¤×•×™ ×›×•×— ×›×œ×œ×™
                <span className="block text-sm text-gray-500">
                  ×œ×›×œ ×¢× ×™×™× ×™ ×”××™×™×¤×”
                </span>
              </Label>
            </div>
            <div className="flex items-center space-x-2 space-x-reverse">
              <RadioGroupItem value="specific" id="specific" />
              <Label htmlFor="specific">
                ×™×™×¤×•×™ ×›×•×— ××™×•×—×“
                <span className="block text-sm text-gray-500">
                  ×œ×¢× ×™×™×Ÿ ×¡×¤×¦×™×¤×™ (×œ××©×œ: ×¦×• ×™×¨×•×©×”)
                </span>
              </Label>
            </div>
          </RadioGroup>
        </CardContent>
      </Card>
      
      {/* ×¤×¨×˜×™ ×”××™×™×¤×” */}
      <Card>
        <CardHeader>
          <CardTitle>×¤×¨×˜×™ ×”××™×™×¤×”</CardTitle>
          <CardDescription>××™ ×©× ×•×ª×Ÿ ××ª ×™×™×¤×•×™ ×”×›×•×—</CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <Input
            label="×©× ××œ×"
            {...register('principal.name', { required: '×™×© ×œ××œ× ×©×' })}
            error={errors.principal?.name?.message}
          />
          <Input
            label="×ª×¢×•×“×ª ×–×”×•×ª"
            {...register('principal.id', { 
              required: '×™×© ×œ××œ× ×ª.×–.',
              minLength: { value: 9, message: '9 ×¡×¤×¨×•×ª' }
            })}
            error={errors.principal?.id?.message}
            maxLength={9}
          />
          <Input
            label="×›×ª×•×‘×ª ××œ××”"
            {...register('principal.address', { required: '×™×© ×œ××œ× ×›×ª×•×‘×ª' })}
            error={errors.principal?.address?.message}
          />
          <Input
            label="×˜×œ×¤×•×Ÿ (××•×¤×¦×™×•× ×œ×™)"
            {...register('principal.phone')}
          />
        </CardContent>
      </Card>
      
      {/* ×¤×¨×˜×™ ×”××™×•×¤×” */}
      <Card>
        <CardHeader>
          <CardTitle>×¤×¨×˜×™ ×”××™×•×¤×”</CardTitle>
          <CardDescription>××™ ×©××§×‘×œ ××ª ×™×™×¤×•×™ ×”×›×•×—</CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <Input
            label="×©× ××œ×"
            {...register('agent.name', { required: '×™×© ×œ××œ× ×©×' })}
            error={errors.agent?.name?.message}
          />
          <Input
            label="×ª×¢×•×“×ª ×–×”×•×ª"
            {...register('agent.id', { 
              required: '×™×© ×œ××œ× ×ª.×–.',
              minLength: { value: 9, message: '9 ×¡×¤×¨×•×ª' }
            })}
            error={errors.agent?.id?.message}
            maxLength={9}
          />
          <Input
            label="×›×ª×•×‘×ª"
            {...register('agent.address', { required: '×™×© ×œ××œ× ×›×ª×•×‘×ª' })}
            error={errors.agent?.address?.message}
          />
          
          <div className="flex items-center gap-2">
            <Checkbox
              id="isAttorney"
              {...register('agent.isAttorney')}
            />
            <Label htmlFor="isAttorney">
              ×”××™×•×¤×” ×”×•× ×¢×•×¨×š ×“×™×Ÿ
            </Label>
          </div>
          
          {watch('agent.isAttorney') && (
            <Input
              label="××¡×¤×¨ ×¨×™×©×™×•×Ÿ"
              {...register('agent.licenseNumber')}
            />
          )}
        </CardContent>
      </Card>
      
      {/* ××˜×¨×” (×¨×§ ×œ×™×™×¤×•×™ ×›×•×— ××™×•×—×“) */}
      {poaType === 'specific' && (
        <Card>
          <CardHeader>
            <CardTitle>××˜×¨×ª ×™×™×¤×•×™ ×”×›×•×—</CardTitle>
          </CardHeader>
          <CardContent className="space-y-4">
            <Select
              label="×¡×•×’ ×”×¢× ×™×™×Ÿ"
              {...register('purpose.type')}
            >
              <option value="inheritance">×¢× ×™×™× ×™ ×™×¨×•×©×”</option>
              <option value="real_estate">× ×“×œ"×Ÿ</option>
              <option value="banking">×‘× ×§××•×ª</option>
              <option value="other">××—×¨</option>
            </Select>
            
            {watch('purpose.type') === 'inheritance' && (
              <>
                <Input
                  label="×©× ×”×× ×•×—/×”"
                  {...register('purpose.deceasedName')}
                />
                <Input
                  label="×ª×¢×•×“×ª ×–×”×•×ª ×©×œ ×”×× ×•×—/×”"
                  {...register('purpose.deceasedId')}
                  maxLength={9}
                />
              </>
            )}
            
            <Textarea
              label="×ª×™××•×¨ ×”××˜×¨×”"
              {...register('purpose.description')}
              rows={3}
              placeholder="×ª××¨ ×‘×§×¦×¨×” ×œ××” × ×•×¢×“ ×™×™×¤×•×™ ×”×›×•×—"
            />
          </CardContent>
        </Card>
      )}
      
      {/* ×¡××›×•×™×•×ª (×¨×§ ×œ×™×™×¤×•×™ ×›×•×— ×›×œ×œ×™) */}
      {poaType === 'general' && (
        <Card>
          <CardHeader>
            <CardTitle>×¡××›×•×™×•×ª ×”××™×•×¤×”</CardTitle>
            <CardDescription>×‘×—×¨ ××ª ×”×¡××›×•×™×•×ª ×©×‘×¨×¦×•× ×š ×œ×”×¢× ×™×§</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="space-y-3">
              <div className="flex items-start gap-2">
                <Checkbox
                  id="realEstate"
                  {...register('powers.realEstate')}
                />
                <div>
                  <Label htmlFor="realEstate">×¢×¡×§××•×ª × ×“×œ"×Ÿ</Label>
                  <p className="text-sm text-gray-500">
                    ×§× ×™×™×”, ××›×™×¨×”, ×”×©×›×¨×” ×©×œ × ×›×¡×™×
                  </p>
                </div>
              </div>
              
              <div className="flex items-start gap-2">
                <Checkbox
                  id="banking"
                  {...register('powers.banking')}
                />
                <div>
                  <Label htmlFor="banking">×¢×¡×§××•×ª ×‘× ×§××™×•×ª</Label>
                  <p className="text-sm text-gray-500">
                    ××©×™×›×•×ª, ×”×¤×§×“×•×ª, ×”×¢×‘×¨×•×ª
                  </p>
                </div>
              </div>
              
              {watch('powers.banking') && (
                <Input
                  label="×¡×›×•× ××§×¡×™××œ×™ ×œ×”×¢×‘×¨×” (â‚ª)"
                  type="number"
                  {...register('powers.maxBankingAmount', { valueAsNumber: true })}
                  placeholder="×”×©××¨ ×¨×™×§ ×œ×œ× ×”×’×‘×œ×”"
                />
              )}
              
              <div className="flex items-start gap-2">
                <Checkbox
                  id="tax"
                  {...register('powers.tax')}
                />
                <div>
                  <Label htmlFor="tax">×¢× ×™×™× ×™ ××¡</Label>
                  <p className="text-sm text-gray-500">
                    ×”×’×©×ª ×“×•×—×•×ª, ×™×™×¦×•×’ ××•×œ ×¨×©×•×™×•×ª ×”××¡
                  </p>
                </div>
              </div>
              
              <div className="flex items-start gap-2">
                <Checkbox
                  id="legal"
                  {...register('powers.legal')}
                />
                <div>
                  <Label htmlFor="legal">×”×œ×™×›×™× ××©×¤×˜×™×™×</Label>
                  <p className="text-sm text-gray-500">
                    ×™×™×¦×•×’ ×‘×‘×ª×™ ××©×¤×˜, ×”×’×©×ª ×ª×‘×™×¢×•×ª
                  </p>
                </div>
              </div>
              
              <div className="flex items-start gap-2">
                <Checkbox
                  id="inheritance"
                  {...register('powers.inheritance')}
                />
                <div>
                  <Label htmlFor="inheritance">×¢× ×™×™× ×™ ×™×¨×•×©×”</Label>
                  <p className="text-sm text-gray-500">
                    ×”×’×©×ª ×‘×§×©×•×ª ×œ×¦×• ×™×¨×•×©×”/×§×™×•×
                  </p>
                </div>
              </div>
              
              <Divider />
              
              <div className="flex items-start gap-2">
                <Checkbox
                  id="canDelegate"
                  {...register('powers.canDelegate')}
                />
                <div>
                  <Label htmlFor="canDelegate">×™×™×¤×•×™ ×›×•×— ××©× ×”</Label>
                  <p className="text-sm text-gray-500">
                    ×”××™×•×¤×” ×¨×©××™ ×œ×”×¢× ×™×§ ×™×™×¤×•×™ ×›×•×— ×œ××—×¨×™×
                  </p>
                </div>
              </div>
              
              <div className="flex items-start gap-2">
                <Checkbox
                  id="canRevokeOthers"
                  {...register('powers.canRevokeOthers')}
                />
                <div>
                  <Label htmlFor="canRevokeOthers">×‘×™×˜×•×œ ×™×™×¤×•×™×™ ×›×•×— ×§×•×“××™×</Label>
                  <p className="text-sm text-gray-500">
                    ×”××™×•×¤×” ×¨×©××™ ×œ×‘×˜×œ ×™×™×¤×•×™×™ ×›×•×— ×©× ×™×ª× ×• ×‘×¢×‘×¨
                  </p>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      )}
      
      {/* ×”×’×‘×œ×•×ª */}
      <Card>
        <CardHeader>
          <CardTitle>×”×’×‘×œ×•×ª (××•×¤×¦×™×•× ×œ×™)</CardTitle>
          <CardDescription>×¤×¢×•×œ×•×ª ×©×”××™×•×¤×” ××™× ×• ×¨×©××™ ×œ×‘×¦×¢</CardDescription>
        </CardHeader>
        <CardContent>
          <Textarea
            {...register('restrictions')}
            rows={4}
            placeholder="×œ×“×•×’××”: ×”××™×•×¤×” ×œ× ×¨×©××™ ×œ××›×•×¨ × ×“×œ"×Ÿ ×œ×œ× ××™×©×•×¨ ××¨××©..."
          />
        </CardContent>
      </Card>
      
      {/* ×ª×•×§×£ */}
      <Card>
        <CardHeader>
          <CardTitle>×ª×•×§×£ ×™×™×¤×•×™ ×”×›×•×—</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <RadioGroup
            defaultValue="unlimited"
            {...register('validity.type')}
          >
            <div className="flex items-center gap-2">
              <RadioGroupItem value="unlimited" id="unlimited" />
              <Label htmlFor="unlimited">×œ×œ× ×”×’×‘×œ×ª ×–××Ÿ</Label>
            </div>
            
            <div className="flex items-center gap-2">
              <RadioGroupItem value="until_date" id="until_date" />
              <Label htmlFor="until_date">×¢×“ ×œ×ª××¨×™×š</Label>
            </div>
            
            {watch('validity.type') === 'until_date' && (
              <Input
                type="date"
                {...register('validity.endDate')}
                className="mr-6"
              />
            )}
            
            <div className="flex items-center gap-2">
              <RadioGroupItem value="until_completion" id="until_completion" />
              <Label htmlFor="until_completion">
                ×¢×“ ×œ×”×©×œ××ª ×”××˜×¨×”
              </Label>
            </div>
          </RadioGroup>
          
          <Divider />
          
          <div className="flex items-center gap-2">
            <Checkbox
              id="irrevocable"
              {...register('validity.irrevocable')}
            />
            <Label htmlFor="irrevocable">
              ×™×™×¤×•×™ ×›×•×— ×‘×œ×ª×™ ×—×•×–×¨
              <span className="block text-sm text-gray-500">
                ×œ× × ×™×ª×Ÿ ×œ×‘×™×˜×•×œ (× ×“×™×¨!)
              </span>
            </Label>
          </div>
        </CardContent>
      </Card>
      
      {/* ×›×¤×ª×•×¨×™ ×¤×¢×•×œ×” */}
      <div className="flex gap-4">
        <Button type="submit" size="lg">
          ×©××•×¨ ×™×™×¤×•×™ ×›×•×—
        </Button>
        <Button type="button" variant="outline" size="lg">
          ×ª×¦×•×’×” ××§×“×™××”
        </Button>
      </div>
    </form>
  )
}
```

---

## 3. ×‘×§×©×” ×œ××™× ×•×™ ××¤×•×˜×¨×•×¤×•×¡ {#×‘×§×©×ª-××¤×•×˜×¨×•×¤×¡×•×ª}

### ×§×•××¤×•× × ×˜×” ×œ× ×™×”×•×œ ×‘× ×™ ××©×¤×—×”

```typescript
// src/app/documents/guardianship/components/FamilyMembersTable.tsx

'use client'

import { useState } from 'react'
import { Plus, Trash2 } from 'lucide-react'

interface FamilyMember {
  id: string
  name: string
  relationship: string
  age: number
  address: string
  agreesToAppointment: boolean
}

export function FamilyMembersTable({ value, onChange }: {
  value: FamilyMember[]
  onChange: (members: FamilyMember[]) => void
}) {
  const addMember = () => {
    const newMember: FamilyMember = {
      id: crypto.randomUUID(),
      name: '',
      relationship: '',
      age: 0,
      address: '',
      agreesToAppointment: false,
    }
    onChange([...value, newMember])
  }
  
  const removeMember = (id: string) => {
    onChange(value.filter(m => m.id !== id))
  }
  
  const updateMember = (id: string, field: keyof FamilyMember, newValue: any) => {
    onChange(
      value.map(m => m.id === id ? { ...m, [field]: newValue } : m)
    )
  }
  
  return (
    <div className="space-y-4">
      <div className="flex justify-between items-center">
        <h4 className="font-semibold">×‘× ×™ ××©×¤×—×”</h4>
        <Button onClick={addMember} variant="outline" size="sm">
          <Plus className="ml-2 h-4 w-4" />
          ×”×•×¡×£ ×‘×Ÿ ××©×¤×—×”
        </Button>
      </div>
      
      {value.length === 0 ? (
        <p className="text-sm text-gray-500">×œ× ×”×•×¡×¤×• ×‘× ×™ ××©×¤×—×”</p>
      ) : (
        <div className="overflow-x-auto">
          <table className="w-full border">
            <thead className="bg-gray-50">
              <tr>
                <th className="p-2 text-right">×©×</th>
                <th className="p-2 text-right">×§×¨×‘×”</th>
                <th className="p-2 text-right">×’×™×œ</th>
                <th className="p-2 text-right">×›×ª×•×‘×ª</th>
                <th className="p-2 text-center">××¡×›×™×?</th>
                <th className="p-2"></th>
              </tr>
            </thead>
            <tbody>
              {value.map((member) => (
                <tr key={member.id} className="border-t">
                  <td className="p-2">
                    <Input
                      value={member.name}
                      onChange={(e) => updateMember(member.id, 'name', e.target.value)}
                      placeholder="×©× ××œ×"
                    />
                  </td>
                  <td className="p-2">
                    <Select
                      value={member.relationship}
                      onChange={(e) => updateMember(member.id, 'relationship', e.target.value)}
                    >
                      <option value="">×‘×—×¨</option>
                      <option value="son">×‘×Ÿ</option>
                      <option value="daughter">×‘×ª</option>
                      <option value="spouse">×‘×Ÿ/×‘×ª ×–×•×’</option>
                      <option value="brother">××—</option>
                      <option value="sister">××—×•×ª</option>
                      <option value="parent">×”×•×¨×”</option>
                      <option value="other">××—×¨</option>
                    </Select>
                  </td>
                  <td className="p-2">
                    <Input
                      type="number"
                      value={member.age || ''}
                      onChange={(e) => updateMember(member.id, 'age', parseInt(e.target.value) || 0)}
                      placeholder="×’×™×œ"
                    />
                  </td>
                  <td className="p-2">
                    <Input
                      value={member.address}
                      onChange={(e) => updateMember(member.id, 'address', e.target.value)}
                      placeholder="×›×ª×•×‘×ª"
                    />
                  </td>
                  <td className="p-2 text-center">
                    <Checkbox
                      checked={member.agreesToAppointment}
                      onCheckedChange={(checked) => 
                        updateMember(member.id, 'agreesToAppointment', checked)
                      }
                    />
                  </td>
                  <td className="p-2">
                    <Button
                      onClick={() => removeMember(member.id)}
                      variant="ghost"
                      size="sm"
                    >
                      <Trash2 className="h-4 w-4 text-red-500" />
                    </Button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      )}
    </div>
  )
}
```

### ×§×•××¤×•× × ×˜×” ×œ× ×™×”×•×œ × ×›×¡×™×

```typescript
// src/app/documents/guardianship/components/AssetsManager.tsx

'use client'

import { useState } from 'react'
import { formatCurrency } from '@/lib/format'

interface Asset {
  id: string
  type: 'real_estate' | 'bank_account' | 'investment' | 'pension' | 'other'
  description: string
  value: number
}

export function AssetsManager({ value, onChange }: {
  value: Asset[]
  onChange: (assets: Asset[]) => void
}) {
  const addAsset = (type: Asset['type']) => {
    const newAsset: Asset = {
      id: crypto.randomUUID(),
      type,
      description: '',
      value: 0,
    }
    onChange([...value, newAsset])
  }
  
  const removeAsset = (id: string) => {
    onChange(value.filter(a => a.id !== id))
  }
  
  const updateAsset = (id: string, field: keyof Asset, newValue: any) => {
    onChange(
      value.map(a => a.id === id ? { ...a, [field]: newValue } : a)
    )
  }
  
  const totalValue = value.reduce((sum, asset) => sum + asset.value, 0)
  
  return (
    <div className="space-y-4">
      <div className="flex gap-2 flex-wrap">
        <Button onClick={() => addAsset('real_estate')} variant="outline" size="sm">
          <Plus className="ml-2 h-4 w-4" />
          × ×“×œ"×Ÿ
        </Button>
        <Button onClick={() => addAsset('bank_account')} variant="outline" size="sm">
          <Plus className="ml-2 h-4 w-4" />
          ×—×©×‘×•×Ÿ ×‘× ×§
        </Button>
        <Button onClick={() => addAsset('investment')} variant="outline" size="sm">
          <Plus className="ml-2 h-4 w-4" />
          ×”×©×§×¢×”
        </Button>
        <Button onClick={() => addAsset('pension')} variant="outline" size="sm">
          <Plus className="ml-2 h-4 w-4" />
          ×¤× ×¡×™×”
        </Button>
        <Button onClick={() => addAsset('other')} variant="outline" size="sm">
          <Plus className="ml-2 h-4 w-4" />
          ××—×¨
        </Button>
      </div>
      
      {value.length === 0 ? (
        <p className="text-sm text-gray-500">×œ× ×”×•×¡×¤×• × ×›×¡×™×</p>
      ) : (
        <div className="space-y-3">
          {value.map((asset) => (
            <Card key={asset.id}>
              <CardContent className="p-4">
                <div className="flex items-start gap-4">
                  <div className="flex-1 space-y-2">
                    <Select
                      value={asset.type}
                      onChange={(e) => updateAsset(asset.id, 'type', e.target.value)}
                    >
                      <option value="real_estate">× ×“×œ"×Ÿ</option>
                      <option value="bank_account">×—×©×‘×•×Ÿ ×‘× ×§</option>
                      <option value="investment">×”×©×§×¢×”</option>
                      <option value="pension">×¤× ×¡×™×”</option>
                      <option value="other">××—×¨</option>
                    </Select>
                    
                    <Input
                      value={asset.description}
                      onChange={(e) => updateAsset(asset.id, 'description', e.target.value)}
                      placeholder="×ª×™××•×¨ ×”× ×›×¡"
                    />
                    
                    <Input
                      type="number"
                      value={asset.value || ''}
                      onChange={(e) => updateAsset(asset.id, 'value', parseFloat(e.target.value) || 0)}
                      placeholder="×¢×¨×š ××©×•×¢×¨ (â‚ª)"
                    />
                  </div>
                  
                  <Button
                    onClick={() => removeAsset(asset.id)}
                    variant="ghost"
                    size="sm"
                  >
                    <Trash2 className="h-4 w-4 text-red-500" />
                  </Button>
                </div>
              </CardContent>
            </Card>
          ))}
          
          <div className="p-4 bg-blue-50 rounded-lg">
            <div className="flex justify-between items-center">
              <span className="font-semibold">×¡×”"×› ×¢×¨×š × ×›×¡×™×:</span>
              <span className="text-xl font-bold">
                {formatCurrency(totalValue)}
              </span>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
```

---

## 4. API Routes {#api-routes}

### API ×œ××¡××š ×›×œ×œ×™

```typescript
// src/app/api/documents/route.ts

import { NextRequest, NextResponse } from 'next/server'
import { getServerSession } from 'next-auth'
import { prisma } from '@/lib/prisma'
import { authOptions } from '@/lib/auth'

export async function POST(req: NextRequest) {
  try {
    const session = await getServerSession(authOptions)
    if (!session?.user?.id) {
      return NextResponse.json({ error: '×œ× ××—×•×‘×¨' }, { status: 401 })
    }
    
    const body = await req.json()
    const { type, data } = body
    
    // Validate type
    const validTypes = [
      'TZO_YERUSHA',
      'TZO_KIYUM',
      'ATTORNEY_FEE_AGREEMENT',
      'POWER_OF_ATTORNEY_GENERAL',
      'POWER_OF_ATTORNEY_SPECIFIC',
      'GUARDIANSHIP_APPLICATION',
    ]
    
    if (!validTypes.includes(type)) {
      return NextResponse.json({ error: '×¡×•×’ ××¡××š ×œ× ×ª×§×™×Ÿ' }, { status: 400 })
    }
    
    // Create document
    const document = await prisma.document.create({
      data: {
        userId: session.user.id,
        type,
        data,
        status: 'DRAFT',
      },
    })
    
    return NextResponse.json(document)
  } catch (error) {
    console.error('Error creating document:', error)
    return NextResponse.json({ error: '×©×’×™××” ×‘×©××™×¨×”' }, { status: 500 })
  }
}

export async function GET(req: NextRequest) {
  try {
    const session = await getServerSession(authOptions)
    if (!session?.user?.id) {
      return NextResponse.json({ error: '×œ× ××—×•×‘×¨' }, { status: 401 })
    }
    
    const { searchParams } = new URL(req.url)
    const type = searchParams.get('type')
    const status = searchParams.get('status')
    
    const documents = await prisma.document.findMany({
      where: {
        userId: session.user.id,
        ...(type && { type: type as any }),
        ...(status && { status: status as any }),
      },
      orderBy: {
        updatedAt: 'desc',
      },
    })
    
    return NextResponse.json(documents)
  } catch (error) {
    console.error('Error fetching documents:', error)
    return NextResponse.json({ error: '×©×’×™××” ×‘×˜×¢×™× ×”' }, { status: 500 })
  }
}
```

### API ×œ××¡××š ×¡×¤×¦×™×¤×™

```typescript
// src/app/api/documents/[id]/route.ts

import { NextRequest, NextResponse } from 'next/server'
import { getServerSession } from 'next-auth'
import { prisma } from '@/lib/prisma'
import { authOptions } from '@/lib/auth'

export async function GET(
  req: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const session = await getServerSession(authOptions)
    if (!session?.user?.id) {
      return NextResponse.json({ error: '×œ× ××—×•×‘×¨' }, { status: 401 })
    }
    
    const document = await prisma.document.findUnique({
      where: {
        id: params.id,
        userId: session.user.id, // ×•×•×“× ×©×”××¡××š ×©×™×™×š ×œ××©×ª××©
      },
      include: {
        attachments: true,
        signatures: true,
      },
    })
    
    if (!document) {
      return NextResponse.json({ error: '××¡××š ×œ× × ××¦×' }, { status: 404 })
    }
    
    return NextResponse.json(document)
  } catch (error) {
    console.error('Error fetching document:', error)
    return NextResponse.json({ error: '×©×’×™××” ×‘×˜×¢×™× ×”' }, { status: 500 })
  }
}

export async function PUT(
  req: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const session = await getServerSession(authOptions)
    if (!session?.user?.id) {
      return NextResponse.json({ error: '×œ× ××—×•×‘×¨' }, { status: 401 })
    }
    
    const body = await req.json()
    const { data, status } = body
    
    const document = await prisma.document.update({
      where: {
        id: params.id,
        userId: session.user.id,
      },
      data: {
        ...(data && { data }),
        ...(status && { status }),
      },
    })
    
    return NextResponse.json(document)
  } catch (error) {
    console.error('Error updating document:', error)
    return NextResponse.json({ error: '×©×’×™××” ×‘×¢×“×›×•×Ÿ' }, { status: 500 })
  }
}

export async function DELETE(
  req: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const session = await getServerSession(authOptions)
    if (!session?.user?.id) {
      return NextResponse.json({ error: '×œ× ××—×•×‘×¨' }, { status: 401 })
    }
    
    await prisma.document.delete({
      where: {
        id: params.id,
        userId: session.user.id,
      },
    })
    
    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Error deleting document:', error)
    return NextResponse.json({ error: '×©×’×™××” ×‘××—×™×§×”' }, { status: 500 })
  }
}
```

---

## 5. ×ª×‘× ×™×•×ª PDF {#pdf-templates}

### ×ª×‘× ×™×ª PDF ×œ×”×¡×›× ×©×›×¨ ×˜×¨×—×”

```typescript
// src/lib/pdf/attorney-fee-template.tsx

import { Document, Page, Text, View, StyleSheet, Font } from '@react-pdf/renderer'
import type { AttorneyFeeAgreement } from '@/types/attorney-fee'

// ×¨×™×©×•× ×¤×•× ×˜×™×
Font.register({
  family: 'Rubik',
  src: '/fonts/Rubik-Regular.ttf',
})

Font.register({
  family: 'Rubik-Bold',
  src: '/fonts/Rubik-Bold.ttf',
})

const styles = StyleSheet.create({
  page: {
    padding: 40,
    fontFamily: 'Rubik',
    fontSize: 11,
    direction: 'rtl',
  },
  title: {
    fontSize: 18,
    fontFamily: 'Rubik-Bold',
    textAlign: 'center',
    marginBottom: 20,
  },
  section: {
    marginBottom: 15,
  },
  sectionTitle: {
    fontSize: 13,
    fontFamily: 'Rubik-Bold',
    marginBottom: 8,
    textDecoration: 'underline',
  },
  row: {
    flexDirection: 'row-reverse',
    marginBottom: 5,
  },
  label: {
    width: '30%',
    fontFamily: 'Rubik-Bold',
  },
  value: {
    width: '70%',
  },
  table: {
    marginTop: 10,
    border: '1px solid #ccc',
  },
  tableRow: {
    flexDirection: 'row-reverse',
    borderBottom: '1px solid #ccc',
  },
  tableCell: {
    padding: 5,
    borderRight: '1px solid #ccc',
  },
  signature: {
    marginTop: 30,
    flexDirection: 'row-reverse',
    justifyContent: 'space-between',
  },
  signatureBox: {
    width: '45%',
    borderTop: '1px solid #000',
    paddingTop: 5,
    textAlign: 'center',
  },
})

export function AttorneyFeePDF({ data }: { data: AttorneyFeeAgreement }) {
  return (
    <Document>
      <Page size="A4" style={styles.page}>
        <Text style={styles.title}>×”×¡×›× ×©×›×¨ ×˜×¨×—×”</Text>
        
        <View style={styles.section}>
          <Text>
            × ×¢×¨×š ×•× ×—×ª× ×‘{data.signedAt} ×‘×™×•× {data.date}
          </Text>
        </View>
        
        {/* ×¤×¨×˜×™ ×¢×•×¨×š ×”×“×™×Ÿ */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>×‘×™×Ÿ:</Text>
          <View style={styles.row}>
            <Text style={styles.label}>×©×:</Text>
            <Text style={styles.value}>{data.attorney.name}</Text>
          </View>
          <View style={styles.row}>
            <Text style={styles.label}>×.×¨.:</Text>
            <Text style={styles.value}>{data.attorney.licenseNumber}</Text>
          </View>
          <View style={styles.row}>
            <Text style={styles.label}>×›×ª×•×‘×ª:</Text>
            <Text style={styles.value}>{data.attorney.address}</Text>
          </View>
          <Text style={{ marginTop: 5 }}>(×œ×”×œ×Ÿ: "×¢×•×¨×š ×”×“×™×Ÿ")</Text>
        </View>
        
        {/* ×¤×¨×˜×™ ×”×œ×§×•×— */}
        <View style={styles.section}>
          <Text style={styles.sectionTitle}>×œ×‘×™×Ÿ:</Text>
          <View style={styles.row}>
            <Text style={styles.label}>×©×:</Text>
            <Text style={styles.value}>{data.client.name}</Text>
          </View>
          <View style={styles.row}>
            <Text style={styles.label}>×ª.×–.:</Text>
            <Text style={styles.value}>{data.client.id}</Text>
          </View>
          <View style={styles.row}>
            <Text style={styles.label}>×›×ª×•×‘×ª:</Text>
            <Text style={styles.value}>{data.client.address}</Text>
          </View>
          <Text style={{ marginTop: 5 }}>(×œ×”×œ×Ÿ: "×”×œ×§×•×—")</Text>
        </View>
        
        {/* ×˜×‘×œ×ª ×—×™×©×•×‘ (×× ×™×©) */}
        {data.fee.calculatedFee && (
          <View style={styles.section}>
            <Text style={styles.sectionTitle}>×—×™×©×•×‘ ×©×›×¨ ×˜×¨×—×”:</Text>
            <View style={styles.table}>
              {/* ×”×•×¡×£ ×©×•×¨×•×ª ×˜×‘×œ×” ×›××Ÿ */}
            </View>
          </View>
        )}
        
        {/* ×—×ª×™××•×ª */}
        <View style={styles.signature}>
          <View style={styles.signatureBox}>
            <Text>×—×ª×™××ª ×”×œ×§×•×—</Text>
            <Text style={{ marginTop: 5 }}>_______________</Text>
            <Text style={{ marginTop: 5 }}>×ª××¨×™×š: _________</Text>
          </View>
          <View style={styles.signatureBox}>
            <Text>×—×ª×™××ª ×¢×•×¨×š ×”×“×™×Ÿ</Text>
            <Text style={{ marginTop: 5 }}>_______________</Text>
            <Text style={{ marginTop: 5 }}>×ª××¨×™×š: _________</Text>
          </View>
        </View>
      </Page>
    </Document>
  )
}
```

---

## ×¡×™×›×•×

×¢×›×©×™×• ×™×© ×œ×š:

1. âœ… **Types ××œ××™×** ×œ×›×œ 3 ×”××¡××›×™×
2. âœ… **×§×•××¤×•× × ×˜×•×ª ×˜×•×¤×¡** ××¤×•×¨×˜×•×ª ×¢× ×›×œ ×”×©×“×•×ª
3. âœ… **×—×™×©×•×‘×™× ××•×˜×•××˜×™×™×** (×©×›×¨ ×˜×¨×—×”, × ×›×¡×™×)
4. âœ… **×˜×‘×œ××•×ª ×“×™× ××™×•×ª** (×‘× ×™ ××©×¤×—×”, × ×›×¡×™×)
5. âœ… **API Routes** ××œ××™× ×œ-CRUD
6. âœ… **×ª×‘× ×™×•×ª PDF** ×œ×”×“×¤×¡×”

×›×œ ×”×§×•×“ ×›×ª×•×‘ ×‘:
- âœ… **×¢×‘×¨×™×ª ×ª×§× ×™×ª** (×œ× ××ª×•×¨×’××ª!)
- âœ… **TypeScript** ×¢× types ××œ××™×
- âœ… **React Hook Form** ×œ× ×™×”×•×œ ×˜×¤×¡×™×
- âœ… **Zod** ×œ×•×œ×™×“×¦×™×”
- âœ… **Prisma** ×œ××¡×“ × ×ª×•× ×™×

×”××¡××›×™× ××•×›× ×™× ×œ×¤×™×ª×•×—! ğŸš€
